{"ast":null,"code":"import { WebSocketSubject } from 'rxjs/webSocket';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction ComptageESComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"R\\u00E9ponse du serveur :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.reply);\n  }\n}\nconst _c0 = \".container[_ngcontent-%COMP%] {\\r\\n    padding: 20px;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  #cameraUrl[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    padding: 10px;\\r\\n    margin-bottom: 20px;\\r\\n    border: 2px solid hwb(10 16% 6%);\\r\\n    border-radius: 5px;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  button[_ngcontent-%COMP%] {\\r\\n    background-color: hwb(10 16% 6%);\\r\\n    color: #fff; \\r\\n    padding: 10px 20px;\\r\\n    border: none;\\r\\n    border-radius: 5px;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: hwb(10 36% 16%);\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcHRhZ2UtZXMvY29tcHRhZ2UtZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2QkFBNkI7O0FBRTdCLHVCQUF1QjtBQUN2QjtJQUNJLGFBQWE7RUFDZjs7RUFFQSxxQkFBcUI7RUFDckI7SUFDRSxXQUFXO0lBQ1gsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQixnQ0FBZ0M7SUFDaEMsa0JBQWtCO0VBQ3BCOztFQUVBLG9CQUFvQjtFQUNwQjtJQUNFLGdDQUFnQztJQUNoQyxXQUFXLEVBQUUsVUFBVTtJQUN2QixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixlQUFlO0VBQ2pCOztFQUVBLDhCQUE4QjtFQUM5QjtJQUNFLGlDQUFpQztFQUNuQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGNhbWVyYS11cmwuY29tcG9uZW50LmNzcyAqL1xyXG5cclxuLyogU3R5bGUgZHUgY29udGVuZXVyICovXHJcbi5jb250YWluZXIge1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgLyogU3R5bGUgZGUgbCdpbnB1dCAqL1xyXG4gICNjYW1lcmFVcmwge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkIGh3YigxMCAxNiUgNiUpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIH1cclxuICBcclxuICAvKiBTdHlsZSBkdSBib3V0b24gKi9cclxuICBidXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogaHdiKDEwIDE2JSA2JSk7XHJcbiAgICBjb2xvcjogI2ZmZjsgLyogQmxhbmMgKi9cclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICB9XHJcbiAgXHJcbiAgLyogU3R5bGUgZHUgYm91dG9uIGF1IHN1cnZvbCAqL1xyXG4gIGJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBod2IoMTAgMzYlIDE2JSk7XHJcbiAgfVxyXG4gICJdLCJzb3VyY2VSb290IjoiIn0= */\";\nexport class ComptageESComponent {\n  constructor() {\n    this.cameraUrl = '';\n    this.reply = '';\n    this._channel = new WebSocketSubject('ws://192.168.1.190:4000/');\n  }\n  sendUrlToPython() {\n    if (this.cameraUrl !== '') {\n      const dataToSend = {\n        url: this.cameraUrl\n      };\n      this._channel.next(JSON.stringify(dataToSend));\n    }\n    this._channel.subscribe(data => {\n      try {\n        if (data.status === \"connected\") {\n          this.reply = \"Connected!\";\n          console.log(this.reply);\n        } else if (data.status === \"disconnected\") {\n          this.reply = \"Disconnected!\";\n          console.log(this.reply);\n        } else if (data.count !== undefined) {\n          this.reply = `Count: ${data.count}`;\n          console.log(this.reply);\n        }\n      } catch (error) {\n        console.error('Error processing data:', error);\n        console.log('Received data:', data); // Afficher le contenu reçu pour le débogage\n      }\n    }, error => {\n      console.error('WebSocket error:', error);\n    });\n  }\n  static #_ = this.ɵfac = function ComptageESComponent_Factory(t) {\n    return new (t || ComptageESComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ComptageESComponent,\n    selectors: [[\"app-comptage-es\"]],\n    decls: 19,\n    vars: 2,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [2, \"margin-top\", \"120px\"], [2, \"padding\", \"20px\"], [2, \"margin-bottom\", \"20px\"], [\"for\", \"cameraUrl\"], [\"type\", \"text\", \"id\", \"cameraUrl\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [4, \"ngIf\"]],\n    template: function ComptageESComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n        i0.ɵɵelementStart(4, \"title\");\n        i0.ɵɵtext(5, \"Login Page\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"body\")(7, \"div\", 3)(8, \"h2\");\n        i0.ɵɵtext(9, \"Facial Recognition\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 4)(11, \"div\", 5)(12, \"label\", 6);\n        i0.ɵɵtext(13, \"URL de la cam\\u00E9ra:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function ComptageESComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.cameraUrl = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 5)(16, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function ComptageESComponent_Template_button_click_16_listener() {\n          return ctx.sendUrlToPython();\n        });\n        i0.ɵɵtext(17, \"Envoyer URL\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(18, ComptageESComponent_div_18_Template, 5, 1, \"div\", 9);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.cameraUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.reply !== \"\");\n      }\n    },\n    dependencies: [i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel],\n    styles: [_c0, _c0]\n  });\n}","map":{"version":3,"mappings":"AACA,SAASA,gBAAgB,QAAQ,gBAAgB;;;;;;ICmB/CC,2BAA0B;IACrBA,yCAAoB;IAAAA,iBAAI;IAC3BA,0BAAI;IAAAA,YAAW;IAAAA,iBAAK;;;;IAAhBA,eAAW;IAAXA,kCAAW;;;;ADfnB,OAAM,MAAOC,mBAAmB;EALhCC;IAOE,cAAS,GAAW,EAAE;IACtB,UAAK,GAAW,EAAE;IACV,aAAQ,GAA0B,IAAIH,gBAAgB,CAAM,0BAA0B,CAAC;;EAI/FI,eAAe;IAEb,IAAI,IAAI,CAACC,SAAS,KAAK,EAAE,EAAE;MACzB,MAAMC,UAAU,GAAG;QAAEC,GAAG,EAAE,IAAI,CAACF;MAAS,CAAE;MAC1C,IAAI,CAACG,QAAQ,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,CAACL,UAAU,CAAC,CAAC;;IAGhD,IAAI,CAACE,QAAQ,CAACI,SAAS,CACpBC,IAAI,IAAI;MACP,IAAI;QACF,IAAIA,IAAI,CAACC,MAAM,KAAK,WAAW,EAAE;UAC/B,IAAI,CAACC,KAAK,GAAG,YAAY;UACzBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,KAAK,CAAC;SACxB,MAAM,IAAIF,IAAI,CAACC,MAAM,KAAK,cAAc,EAAE;UACzC,IAAI,CAACC,KAAK,GAAG,eAAe;UAC5BC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,KAAK,CAAC;SACxB,MAAM,IAAIF,IAAI,CAACK,KAAK,KAAKC,SAAS,EAAE;UACnC,IAAI,CAACJ,KAAK,GAAG,UAAUF,IAAI,CAACK,KAAK,EAAE;UACnCF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,KAAK,CAAC;;OAE1B,CAAC,OAAOK,KAAK,EAAE;QACdJ,OAAO,CAACI,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9CJ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEJ,IAAI,CAAC,CAAC,CAAC;;IAEzC,CAAC,EACAO,KAAK,IAAI;MACRJ,OAAO,CAACI,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IAC1C,CAAC,CACF;EAIH;EAAC;qBAxCUlB,mBAAmB;EAAA;EAAA;UAAnBA,mBAAmB;IAAAmB;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCLhCxB,+BAAgB;QAEdA,0BAAsB;QAEtBA,6BAAO;QAAAA,0BAAU;QAAAA,iBAAQ;QAG3BA,4BAAM;QAEEA,kCAAkB;QAAAA,iBAAK;QAC/BA,+BAA4B;QAEDA,uCAAiB;QAAAA,iBAAQ;QAChDA,iCAA0D;QAAxBA;UAAA;QAAA,EAAuB;QAAzDA,iBAA0D;QAE5DA,+BAAkC;QACxBA;UAAA,OAASyB,qBAAiB;QAAA,EAAC;QAACzB,4BAAW;QAAAA,iBAAS;QAE1DA,sEAGM;QACRA,iBAAM;;;QATgCA,gBAAuB;QAAvBA,uCAAuB;QAKrDA,eAAkB;QAAlBA,uCAAkB","names":["WebSocketSubject","i0","ComptageESComponent","constructor","sendUrlToPython","cameraUrl","dataToSend","url","_channel","next","JSON","stringify","subscribe","data","status","reply","console","log","count","undefined","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\1ESPRIT\\pi\\front\\pi-angular\\src\\app\\comptage-es\\comptage-es.component.ts","E:\\1ESPRIT\\pi\\front\\pi-angular\\src\\app\\comptage-es\\comptage-es.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { WebSocketSubject } from 'rxjs/webSocket';\n@Component({\n  selector: 'app-comptage-es',\n  templateUrl: './comptage-es.component.html',\n  styleUrls: ['./comptage-es.component.css']\n})\nexport class ComptageESComponent {\n\n  cameraUrl: string = '';\n  reply: string = '';\n  private _channel: WebSocketSubject<any> = new WebSocketSubject<any>('ws://192.168.1.190:4000/');\n\n\n\n  sendUrlToPython() {\n   \n    if (this.cameraUrl !== '') {\n      const dataToSend = { url: this.cameraUrl };\n      this._channel.next(JSON.stringify(dataToSend));\n    }\n    \n    this._channel.subscribe(\n      (data) => {\n        try {\n          if (data.status === \"connected\") {\n            this.reply = \"Connected!\";\n            console.log(this.reply);\n          } else if (data.status === \"disconnected\") {\n            this.reply = \"Disconnected!\";\n            console.log(this.reply);\n          } else if (data.count !== undefined) {\n            this.reply = `Count: ${data.count}`;\n            console.log(this.reply);\n          }\n        } catch (error) {\n          console.error('Error processing data:', error);\n          console.log('Received data:', data); // Afficher le contenu reçu pour le débogage\n        }\n      },\n      (error) => {\n        console.error('WebSocket error:', error);\n      }\n    );\n    \n    \n\n  }\n}\n","\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Login Page</title>\n  <link rel=\"stylesheet\" href=\"comptage-es.component.css\">\n</head>\n<body>\n  <div style=\"margin-top: 120px;\">\n    <h2>Facial Recognition</h2>\n<div style=\"padding: 20px;\">\n  <div style=\"margin-bottom: 20px;\">\n    <label for=\"cameraUrl\">URL de la caméra:</label>\n    <input type=\"text\" id=\"cameraUrl\" [(ngModel)]=\"cameraUrl\">\n  </div>\n  <div style=\"margin-bottom: 20px;\">\n    <button (click)=\"sendUrlToPython()\">Envoyer URL</button>\n  </div>\n  <div *ngIf=\"reply !== ''\">\n    <p>Réponse du serveur :</p>\n    <h2>{{ reply }}</h2>\n  </div>\n</div>\n</div>\n</body>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}